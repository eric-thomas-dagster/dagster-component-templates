{
  "type": "dagster_component_templates.Customer360Component",
  "name": "Customer 360",
  "category": "cdp",
  "description": "Create unified customer profiles from multiple data sources (marketing, payments, analytics, CRM).",
  "version": "1.0.0",
  "author": "Dagster Community",
  "x-dagster-io": {
    "inputs": {
      "type": "dataframe",
      "required": true,
      "description": "Multiple customer data sources (Stripe, Marketing, GA4, CRM)",
      "expected_columns": [
        {
          "name": "customer_id",
          "type": "string",
          "required": false,
          "alternatives": ["user_id", "email", "customerId", "userId", "id"],
          "description": "Primary identifier for joining customer data"
        },
        {
          "name": "email",
          "type": "string",
          "required": false,
          "alternatives": ["customer_email", "user_email"],
          "description": "Email address for joining customer data"
        }
      ],
      "compatible_upstream": [
        "stripe_ingestion",
        "salesforce_ingestion",
        "hubspot_ingestion",
        "marketing_data_standardizer",
        "google_analytics_4_ingestion",
        "shopify_ingestion"
      ]
    },
    "outputs": {
      "type": "dataframe",
      "description": "Unified customer profiles with aggregated metrics",
      "columns": [
        {"name": "customer_id", "type": "string"},
        {"name": "email", "type": "string"},
        {"name": "total_revenue", "type": "number"},
        {"name": "total_orders", "type": "number"},
        {"name": "first_order_date", "type": "datetime"},
        {"name": "last_order_date", "type": "datetime"},
        {"name": "lifetime_days", "type": "number"},
        {"name": "acquisition_source", "type": "string"},
        {"name": "total_sessions", "type": "number"},
        {"name": "is_active", "type": "boolean"}
      ]
    },
    "supports_partitions": false
  },
  "attributes": {
    "asset_name": {
      "type": "string",
      "required": true,
      "label": "Asset Name",
      "description": "Name of unified customer profile asset",
      "placeholder": "customer_360"
    },
    "join_key": {
      "type": "string",
      "required": false,
      "label": "Join Key",
      "description": "Primary key for joining (email, user_id, customer_id)",
      "default": "email",
      "placeholder": "email"
    },
    "active_days_threshold": {
      "type": "number",
      "required": false,
      "label": "Active Days Threshold",
      "description": "Days to consider customer active",
      "default": 30,
      "min": 1,
      "max": 365
    },
    "description": {
      "type": "string",
      "required": false,
      "label": "Description",
      "description": "Asset description",
      "placeholder": "Unified customer 360 profiles"
    },
    "group_name": {
      "type": "string",
      "required": false,
      "label": "Group Name",
      "description": "Asset group for organization",
      "default": "customer_analytics",
      "placeholder": "customer_analytics"
    },
    "include_sample_metadata": {
      "type": "boolean",
      "required": false,
      "label": "Include Sample Metadata",
      "description": "Include data preview in metadata",
      "default": true
    }
  },
  "dependencies": {
    "pip": ["pandas>=1.5.0", "numpy>=1.24.0"]
  },
  "tags": ["cdp", "customer-360", "analytics", "unification", "profiles"]
}
