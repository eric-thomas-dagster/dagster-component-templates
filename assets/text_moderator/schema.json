{
  "type": "dagster_component_templates.TextModeratorComponent",
  "name": "Text Moderator",
  "category": "ai",
  "description": "Moderate text content for inappropriate or harmful content",
  "icon": "Shield",
  "attributes": {
    "asset_name": {
      "type": "string",
      "description": "Name of the asset that will hold moderated content",
      "required": true
    },
    "method": {
      "type": "string",
      "description": "Moderation method",
      "default": "openai_moderation",
      "enum": [
        "openai_moderation",
        "perspective_api",
        "transformer",
        "llm"
      ],
      "required": false
    },
    "llm_provider": {
      "type": "string",
      "description": "LLM provider (required for method=llm)",
      "enum": [
        "openai",
        "anthropic"
      ],
      "required": false
    },
    "llm_model": {
      "type": "string",
      "description": "LLM model name (required for method=llm)",
      "required": false
    },
    "transformer_model": {
      "type": "string",
      "description": "Transformer model (for method=transformer)",
      "required": false
    },
    "api_key": {
      "type": "string",
      "description": "API key for OpenAI, Anthropic, or Perspective API",
      "required": false
    },
    "input_column": {
      "type": "string",
      "description": "Column name containing text to moderate",
      "default": "text",
      "required": false
    },
    "categories": {
      "type": "string",
      "description": "Comma-separated moderation categories to check",
      "default": "toxicity,hate_speech,pii,profanity,sexual,violence",
      "required": false
    },
    "threshold": {
      "type": "number",
      "description": "Confidence threshold for flagging content",
      "default": 0.7,
      "minimum": 0.0,
      "maximum": 1.0,
      "required": false
    },
    "redact_pii": {
      "type": "boolean",
      "description": "Redact/mask detected PII in output",
      "default": false,
      "required": false
    },
    "include_scores": {
      "type": "boolean",
      "description": "Include confidence scores for each category",
      "default": true,
      "required": false
    },
    "flag_column": {
      "type": "string",
      "description": "Column name for overall flag",
      "default": "flagged",
      "required": false
    },
    "batch_size": {
      "type": "integer",
      "description": "Batch size for processing",
      "default": 32,
      "minimum": 1,
      "required": false
    },
    "temperature": {
      "type": "number",
      "description": "Temperature for LLM",
      "default": 0.0,
      "minimum": 0.0,
      "maximum": 2.0,
      "required": false
    },
    "max_tokens": {
      "type": "integer",
      "description": "Max tokens for LLM response",
      "default": 300,
      "required": false
    },
    "rate_limit_delay": {
      "type": "number",
      "description": "Delay in seconds between API calls",
      "default": 0.1,
      "minimum": 0.0,
      "required": false
    },
    "max_retries": {
      "type": "integer",
      "description": "Maximum retries for failed API calls",
      "default": 3,
      "minimum": 0,
      "required": false
    },
    "track_costs": {
      "type": "boolean",
      "description": "Track API costs",
      "default": true,
      "required": false
    },
    "custom_profanity_list": {
      "type": "string",
      "description": "Comma-separated list of custom profanity words",
      "required": false
    },
    "description": {
      "type": "string",
      "description": "Asset description",
      "required": false
    },
    "group_name": {
      "type": "string",
      "description": "Asset group for organization",
      "default": "content_moderation",
      "required": false
    },
    "include_sample_metadata": {
      "type": "boolean",
      "description": "Include sample data preview in metadata",
      "default": true,
      "required": false
    }
  },
  "tags": [
    "ai",
    "llm",
    "nlp"
  ]
}